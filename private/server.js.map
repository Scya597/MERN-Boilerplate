{"version":3,"sources":["webpack:///server.js","webpack:///webpack/bootstrap cc4ae57233f45975a3a3","webpack:///external \"mongoose\"","webpack:///./server/api/routes.js","webpack:///./server/config.js","webpack:///external \"body-parser\"","webpack:///external \"express\"","webpack:///external \"path\"","webpack:///./server/api/controllers/posts_controller.js","webpack:///./server/api/models/Post.js","webpack:///./server/server.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","Object","defineProperty","configurable","enumerable","get","n","__esModule","o","object","property","prototype","hasOwnProperty","p","s","require","_interopRequireDefault","obj","default","_posts_controller","_posts_controller2","server","post","create","put","edit","getposts","getpost","env","process","nodeEnv","mongodbUri","port","PORT","host","HOST","serverUrl","this","_Post","_Post2","req","res","next","postProps","body","then","send","postId","params","id","findByIdAndUpdate","_id","findById","delete","findByIdAndRemove","status","find","posts","findOne","_mongoose","_mongoose2","PostSchema","Schema","title","String","content","Post","model","_express","_express2","_bodyParser","_bodyParser2","_config","_config2","_routes","_routes2","path","use","sendFile","join","__dirname","Promise","global","connect","MONGODB_URI","json","err","error","message","listen","console","info","log"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAI,EAAAJ,EACAK,GAAA,EACAH,WAUA,OANAJ,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,GAAA,EAGAF,EAAAD,QAvBA,GAAAD,KA6DA,OAjCAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAK,EAAA,SAAAK,GAA2C,MAAAA,IAG3CV,EAAAW,EAAA,SAAAR,EAAAS,EAAAC,GACAC,OAAAC,eAAAZ,EAAAS,GACAI,cAAA,EACAC,YAAA,EACAC,IAAAL,KAKAb,EAAAmB,EAAA,SAAAf,GACA,GAAAS,GAAAT,KAAAgB,WACA,WAA2B,MAAAhB,GAAA,YAC3B,WAAiC,MAAAA,GAEjC,OADAJ,GAAAW,EAAAE,EAAA,IAAAA,GACAA,GAIAb,EAAAqB,EAAA,SAAAC,EAAAC,GAAsD,MAAAT,QAAAU,UAAAC,eAAAlB,KAAAe,EAAAC,IAGtDvB,EAAA0B,EAAA,GAGA1B,IAAA2B,EAAA,KDMM,SAASvB,EAAQD,GEpEvBC,EAAAD,QAAAyB,QAAA,aF0EM,SAASxB,EAAQD,EAASH,GAEhC,YACuH,SAAS6B,GAAuBC,GAAK,MAAOA,IAAKA,EAAIV,WAAWU,GAAKC,UAAQD,GG7EpM,GAAAE,GAAAhC,EAAA,GAAAiC,EAAAJ,EAAAG,EAEA5B,GAAOD,QAAU,SAAC+B,GAChBA,EAAOC,KAAK,aAAcF,aAAgBG,QAC1CF,EAAOG,IAAI,iBAAkBJ,aAAgBK,MAC7CJ,YAAc,iBAAkBD,wBAChCC,EAAOhB,IAAI,aAAce,aAAgBM,UACzCL,EAAOhB,IAAI,iBAAkBe,aAAgBO,WH0EzC,SAASpC,EAAQD,EAASH,GAEhC,YACac,QAAOC,eAAeZ,EAAQ,cAAcO,OAAM,GIpF/D,IAAM+B,GAAMC,QAAQD,GAEPE,WAAU,YJkFqHxC,eI/E1IyC,WAAY,iCACZC,KAAMJ,EAAIK,MAAQ,KAClBC,KAAMN,EAAIO,MAAQ,UAClBC,GAAIA,aACF,gBAAiBC,KAAKH,KAAtB,IAA8BG,KAAKL,QJ+EjC,SAASzC,EAAQD,GKxFvBC,EAAAD,QAAAyB,QAAA,gBL8FM,SAASxB,EAAQD,GM9FvBC,EAAAD,QAAAyB,QAAA,YNoGM,SAASxB,EAAQD,GOpGvBC,EAAAD,QAAAyB,QAAA,SP0GM,SAASxB,EAAQD,EAASH,GAEhC,YACmF,SAAS6B,GAAuBC,GAAK,MAAOA,IAAKA,EAAIV,WAAWU,GAAKC,UAAQD,GQ7GhK,GAAAqB,GAAAnD,EAAA,GAAAoD,EAAAvB,EAAAsB,EAEA/C,GAAOD,SAELiC,OAFe,SAERiB,EAAKC,EAAKC,GACf,GAAMC,GAAYH,EAAII,IAEtBL,cAAKhB,OAAOoB,GACTE,KAAK,SAAAvB,GAAA,MAAQmB,GAAIK,KAAKxB,KADzBiB,SAESG,IAGXjB,KAVe,SAUVe,EAAKC,EAAKC,GACb,GAAMK,GAASP,EAAIQ,OAAOC,GACpBN,EAAYH,EAAII,IAEtBL,cAAKW,mBAAoBC,IAAKJ,GAAUJ,GACrCE,KAAK,iBAAMN,cAAKa,UAAWD,IAAKJ,MAChCF,KAAK,SAAAvB,GAAA,MAAQmB,GAAIK,KAAKxB,KAFzBiB,SAGSG,IAGXW,SApBe,SAoBRb,EAAKC,EAAKC,GACf,GAAMK,GAASP,EAAIQ,OAAOC,EAE1BV,cAAKe,mBAAoBH,IAAKJ,IAC3BF,KAAK,SAAAvB,GAAA,MAAQmB,GAAIc,OAAO,KAAKT,KAAKxB,KADrCiB,SAESG,IAGXhB,SA5Be,SA4BNc,EAAKC,EAAKC,GACjBH,aAAKiB,SACFX,KAAK,SAAAY,GAAA,MAAShB,GAAIK,KAAKW,KAD1BlB,SAESG,IAGXf,QAlCe,SAkCPa,EAAKC,EAAKC,GAChB,GAAMK,GAASP,EAAIQ,OAAOC,EAC1BV,cAAKmB,SAAUP,IAAKJ,IACjBF,KAAK,SAAAvB,GAAA,MAAQmB,GAAIK,KAAKxB,KADzBiB,SAESG,MRyEP,SAASnD,EAAQD,EAASH,GAEhC,YAC+F,SAAS6B,GAAuBC,GAAK,MAAOA,IAAKA,EAAIV,WAAWU,GAAKC,UAAQD,GSpH5K,GAAA0C,GAAAxE,EAAA,GAAAyE,EAAA5C,EAAA2C,GAEME,EAAa,GAAAF,GAAAG,QACjBC,MAAOC,OACPC,QAASD,SAGLE,EAAON,aAASO,MAAM,OAAQN,EAEpCtE,GAAOD,QAAU4E,GT+GX,SAAS3E,EAAQD,EAASH,GAEhC,YAC8Y,SAAS6B,GAAuBC,GAAK,MAAOA,IAAKA,EAAIV,WAAWU,GAAKC,UAAQD,GU3H3d,GAAAmD,GAAAjF,EAAA,GAAAkF,EAAArD,EAAAoD,GAAAE,EAAAnF,EAAA,GAAAoF,EAAAvD,EAAAsD,GAAAX,EAAAxE,EAAA,GAAAyE,EAAA5C,EAAA2C,GAAAa,EAAArF,EAAA,GAAAsF,EAAAzD,EAAAwD,GAAAE,EAAAvF,EAAA,GAAAwF,EAAA3D,EAAA0D,GAOME,EAAOzF,EAAQ,GAEfkC,GAAS,EAAAgD,eAkBbhD,GAAOwD,IAAIR,uBAAe,WAC1BhD,EAAOhB,IAAI,IAAK,SAACmC,EAAKC,GACpBA,EAAIqC,SAASF,EAAKG,KAAKC,UAAW,wBAItCpB,aAASqB,QAAUC,OAAOD,QAExBrB,aAASuB,QAAQtD,QAAQD,IAAIwD,aAAe,4BAG9C/D,EAAOwD,IAAIN,aAAWc,SAEtB,EAAAV,cAAUtD,GACVA,EAAOwD,IAAI,SAACS,EAAK9C,EAAKC,EAAKC,GACzBD,EAAIc,OAAO,KAAKT,MAAOyC,MAAOD,EAAIE,UAClC9C,MAGFrB,EAAOoE,OAAOhB,aAAOzC,KAAMyC,aAAOvC,KAAM,WACtCwD,QAAQC,KAAK,4BAA6BlB,aAAOzC,MACjD0D,QAAQE,IAAI","file":"server.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmory imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmory exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tObject.defineProperty(exports, name, {\n/******/ \t\t\tconfigurable: false,\n/******/ \t\t\tenumerable: true,\n/******/ \t\t\tget: getter\n/******/ \t\t});\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 8);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"mongoose\");\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n'use strict';var _posts_controller=__webpack_require__(6),_posts_controller2=_interopRequireDefault(_posts_controller);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=function(server){server.post('/api/posts',_posts_controller2.default.create),server.put('/api/posts/:id',_posts_controller2.default.edit),server.delete('/api/posts/:id',_posts_controller2.default.delete),server.get('/api/posts',_posts_controller2.default.getposts),server.get('/api/posts/:id',_posts_controller2.default.getpost)};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var env=process.env,nodeEnv=exports.nodeEnv=\"production\"||'development';exports.default={mongodbUri:'mongodb://localhost:27017/test',port:env.PORT||8080,host:env.HOST||'0.0.0.0',get serverUrl(){return'http://'+this.host+':'+this.port}};\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"body-parser\");\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"express\");\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\nmodule.exports = require(\"path\");\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n'use strict';var _Post=__webpack_require__(7),_Post2=_interopRequireDefault(_Post);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports={create:function create(req,res,next){var postProps=req.body;_Post2.default.create(postProps).then(function(post){return res.send(post)}).catch(next)},edit:function edit(req,res,next){var postId=req.params.id,postProps=req.body;_Post2.default.findByIdAndUpdate({_id:postId},postProps).then(function(){return _Post2.default.findById({_id:postId})}).then(function(post){return res.send(post)}).catch(next)},delete:function _delete(req,res,next){var postId=req.params.id;_Post2.default.findByIdAndRemove({_id:postId}).then(function(post){return res.status(204).send(post)}).catch(next)},getposts:function getposts(req,res,next){_Post2.default.find({}).then(function(posts){return res.send(posts)}).catch(next)},getpost:function getpost(req,res,next){var postId=req.params.id;_Post2.default.findOne({_id:postId}).then(function(post){return res.send(post)}).catch(next)}};\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n'use strict';var _mongoose=__webpack_require__(0),_mongoose2=_interopRequireDefault(_mongoose);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PostSchema=new _mongoose.Schema({title:String,content:String}),Post=_mongoose2.default.model('post',PostSchema);module.exports=Post;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n'use strict';var _express=__webpack_require__(4),_express2=_interopRequireDefault(_express),_bodyParser=__webpack_require__(3),_bodyParser2=_interopRequireDefault(_bodyParser),_mongoose=__webpack_require__(0),_mongoose2=_interopRequireDefault(_mongoose),_config=__webpack_require__(2),_config2=_interopRequireDefault(_config),_routes=__webpack_require__(1),_routes2=_interopRequireDefault(_routes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var path=__webpack_require__(5),server=(0,_express2.default)();if(false){var webpackMiddleware=require('webpack-dev-middleware'),webpackHotMiddleware=require('webpack-hot-middleware'),webpack=require('webpack'),webpackDevConfig=require('../webpack.dev.config.js'),compiler=webpack(webpackDevConfig),middleware=webpackMiddleware(compiler,{publicPath:webpackDevConfig.output.publicPath,stats:{colors:!0}});server.use(middleware),server.use(webpackHotMiddleware(compiler)),server.get('/',function(req,res){res.sendFile(path.join(__dirname,'../public/index.html'))})}else server.use(_express2.default.static('public')),server.get('/',function(req,res){res.sendFile(path.join(__dirname,'public/index.html'))});_mongoose2.default.Promise=global.Promise,'test'!==\"production\"&&_mongoose2.default.connect(process.env.MONGODB_URI||'mongodb://localhost/blog'),server.use(_bodyParser2.default.json()),(0,_routes2.default)(server),server.use(function(err,req,res,next){res.status(422).send({error:err.message}),next()}),server.listen(_config2.default.port,_config2.default.host,function(){console.info('Express listening on port',_config2.default.port),console.log(\"production\")});\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// server.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cc4ae57233f45975a3a3","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","import PostsController from './controllers/posts_controller';\n\nmodule.exports = (server) => {\n  server.post('/api/posts', PostsController.create);\n  server.put('/api/posts/:id', PostsController.edit);\n  server.delete('/api/posts/:id', PostsController.delete);\n  server.get('/api/posts', PostsController.getposts);\n  server.get('/api/posts/:id', PostsController.getpost);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/routes.js","const env = process.env;\n\nexport const nodeEnv = env.NODE_ENV || 'development';\n\nexport default {\n  mongodbUri: 'mongodb://localhost:27017/test',\n  port: env.PORT || 8080,\n  host: env.HOST || '0.0.0.0',\n  get serverUrl() {\n    return `http://${this.host}:${this.port}`;\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./server/config.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 5\n// module chunks = 0","import Post from '../models/Post';\n\nmodule.exports = {\n\n  create(req, res, next) {\n    const postProps = req.body;\n\n    Post.create(postProps)\n      .then(post => res.send(post))\n      .catch(next);\n  },\n\n  edit(req, res, next) {\n    const postId = req.params.id;\n    const postProps = req.body;\n\n    Post.findByIdAndUpdate({ _id: postId }, postProps)\n      .then(() => Post.findById({ _id: postId }))\n      .then(post => res.send(post))\n      .catch(next);\n  },\n\n  delete(req, res, next) {\n    const postId = req.params.id;\n\n    Post.findByIdAndRemove({ _id: postId })\n      .then(post => res.status(204).send(post))\n      .catch(next);\n  },\n\n  getposts(req, res, next) {\n    Post.find({})\n      .then(posts => res.send(posts))\n      .catch(next);\n  },\n\n  getpost(req, res, next) {\n    const postId = req.params.id;\n    Post.findOne({ _id: postId })\n      .then(post => res.send(post))\n      .catch(next);\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/controllers/posts_controller.js","import mongoose, { Schema } from 'mongoose';\n\nconst PostSchema = new Schema({\n  title: String,\n  content: String,\n});\n\nconst Post = mongoose.model('post', PostSchema);\n\nmodule.exports = Post;\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/models/Post.js","import express from 'express';\nimport bodyParser from 'body-parser';\nimport mongoose from 'mongoose';\n\nimport config from './config';\nimport apiRouter from './api/routes';\n\nconst path = require('path');\n\nconst server = express();\n\nif (process.env.NODE_ENV === 'dev') {\n  const webpackMiddleware = require('webpack-dev-middleware');\n  const webpackHotMiddleware = require('webpack-hot-middleware');\n  const webpack = require('webpack');\n  const webpackDevConfig = require('../webpack.dev.config.js');\n  const compiler = webpack(webpackDevConfig);\n  const middleware = webpackMiddleware(compiler, {\n    publicPath: webpackDevConfig.output.publicPath,\n    stats: { colors: true },\n  });\n  server.use(middleware);\n  server.use(webpackHotMiddleware(compiler));\n  server.get('/', (req, res) => {\n    res.sendFile(path.join(__dirname, '../public/index.html'));\n  });\n} else {\n  server.use(express.static('public'));\n  server.get('/', (req, res) => {\n    res.sendFile(path.join(__dirname, 'public/index.html'));\n  });\n}\n\nmongoose.Promise = global.Promise;\nif (process.env.NODE_ENV !== 'test') {\n  mongoose.connect(process.env.MONGODB_URI || 'mongodb://localhost/blog');\n}\n\nserver.use(bodyParser.json());\n\napiRouter(server);\nserver.use((err, req, res, next) => {\n  res.status(422).send({ error: err.message });\n  next();\n});\n\nserver.listen(config.port, config.host, () => {\n  console.info('Express listening on port', config.port);\n  console.log(process.env.NODE_ENV);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./server/server.js"],"sourceRoot":""}